-- Semantic rule X.4.(6)

-- $Id$

package example_sr_X4_6
public

data dt
end dt;

thread th
  features
    p1 : in event data port dt;
    p2 : in event data port dt;
    p3 : in event data port dt;
    p4 : in event data port dt;
    p5 : in event data port dt;
    p6 : in event data port dt;
    
end th;

thread implementation th.good
subcomponents
  x1 : data dt;
  
annex behavior_specification {**
  states
    s0 : initial state;
    comp : final state;
    next1 : complete state;
    
  transitions
    s0 -[ ]-> next1 { x1 := 0 };
    
    next1 -[on dispatch 3 (p1, p2, p3, p4, p5, p6)]-> comp { x1 := p1 };
**};
end th.good;

thread implementation th.error
subcomponents
  x1 : data dt;
  x2 : data dt;
annex behavior_specification {**
  states
    s0 : initial state;
    comp : final state;
    next1 : complete state;
    
  transitions
    s0 -[ ]-> next1 { x1 := 0 };
    
    --  FIXME : TODO : check with aadl behavior annex comitee
    --  Numeral must be less or equal than dispatch trigger set size
    next1 -[on dispatch 3 (p1, p2)]-> comp { x1 := p1 };
    
   
**};
end th.error;

system s
end s;

processor cpu
end cpu;

process proc
end proc;

process implementation proc.impl
subcomponents
	th : thread th.good;
	
end proc.impl;

system implementation s.impl
subcomponents
 p : process proc;
 c : processor cpu;
 
properties
  Actual_Processor_Binding => reference (c) applies to p;  
end s.impl;

end example_sr_X4_6;