-- Behavior Annex legality rules checker.
-- Use only to test legality rule X.4 L12.

package LegalityRulesTest
public
   with Base_Types ;

thread thread1
 features
   portA : in event data port Base_Types::Integer ;
   portB : out event data port Base_Types::Integer ;
   portC : out data port Base_Types::Integer ;
   portD : in event data port Base_Types::Integer ;
end thread1;


thread implementation thread1.impl

annex behavior_specification {**

variables
 a : Base_Types::Integer ;

states
 s1 : initial state ;
 s2 : complete state ;
 s3 : final state ;

transitions

 s2 -[on dispatch portA(1)]-> s2 {a := 1} ;
 s2 -[on dispatch portA(others)]-> s2 {a := 1} ; 
-- s1 -[on dispatch portA(others)]-> s2 {a := 1} ;



-- Only one of the pair.
-- s2 -[on dispatch portD(1)]-> s2 {a := 1} ;
-- s2 -[on dispatch portD(others)]-> s2 {a := 1} ;

-- Exotic
 s2 -[on dispatch portD(others) and portD(1)]-> s2 {a := 1} ;
-- s2 -[on dispatch portD(others) or (portA(1) and portD(1))]-> s2 {a := 1} ;


**};

end thread1.impl;

end LegalityRulesTest;