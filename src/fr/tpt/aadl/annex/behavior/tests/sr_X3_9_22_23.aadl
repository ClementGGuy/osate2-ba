-- Semantic rules X.3.(9), X.3.(22), X.3.(23)

-- $Id$

package example_sr_X3_9_22_23
public

data dt
end dt;

thread th
  features
    p1 : in event data port dt;
    p2 : in event data port dt;
    m : out event data port dt;
end th;

thread implementation th.good 
subcomponents
  x1 : data dt;
  x2 : data dt;
annex behavior_specification {**
  states
    s0 : initial state;
    comp : final state;
    next1 : state;
    
    -- Error : threat automaton must have a complete state, so next2 have to be complete state
    next2 : complete state;
    
  transitions
    s0 -[ ]-> next1 { x1 := p1 };
    next1 -[ ]-> comp { x2 := p2 };
**};
end th.good;

thread implementation th.error 
subcomponents
  x1 : data dt;
  x2 : data dt;
annex behavior_specification {**
  states
    s0 : initial state;
    comp : final state;
    next1 : state;
    
    -- Error : next2 must be a complete state
    next2 : state;
    
  transitions
    s0 -[ ]-> next1 { x1 := p1 };
    next1 -[ ]-> comp { x2 := p2 };
**};
end th.error;

end example_sr_X3_9_22_23;